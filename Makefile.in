all: omc @OMLIBRARY_TARGET@ omc-diff omplot omnotebook omshell omedit omoptim

.PRECIOUS: Makefile

omc:
	$(MAKE) -C OMCompiler @OMC_TARGET@
omlibrary-core:
	$(MAKE) -C libraries BUILD_DIR=@OMBUILDDIR@/lib/omlibrary core
omlibrary-all:
	$(MAKE) -C libraries BUILD_DIR=@OMBUILDDIR@/lib/omlibrary all
omplot: omc
	$(MAKE) -C OMPlot
omedit: omc omplot
	$(MAKE) -C OMEdit
omnotebook: omc omplot
	$(MAKE) -C OMNotebook
omoptim: omc omplot
	$(MAKE) -C OMOptim
omshell: omc
	$(MAKE) -C OMShell
omc-diff:
	$(MAKE) -C testsuite/difftool "OMBUILDDIR=@OMBUILDDIR@" CC="@CC@" CFLAGS="@CFLAGS@"

clean:
	test ! -d build || rm -r build/

Makefile: Makefile.in config.status
	./config.status
config.status: configure
	./config.status -recheck
configure: configure.ac
	autoconf
