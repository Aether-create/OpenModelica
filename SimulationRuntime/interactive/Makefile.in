#
# Makefile for SimulationRuntime/interactive
#

top_builddir= ../..

CPPSRC = omi_Calculation.cpp omi_Control.cpp omi_ResultManager.cpp \
				 omi_ServiceInterface.cpp omi_Transfer.cpp socket.cpp thread.cpp
#CPPSRC = socket.cpp thread.cpp

SHELL	= /bin/sh
CC = @CC@
CXX = @CXX@
CFLAGS	+= @CFLAGS@
CXXFLAGS = $(CFLAGS) 
CPPFLAGS = -I.. -Wall -I../c/simulation/results/ -I../c/linearization -I../c/simulation/solver/ -I../c/util/ -I../c/ -I../c/simulation/ -I../c/math-support/ $(LIBF2CINC)

LIBF2C=@LIBF2C@
ifeq ($(LIBF2C),)
else
LIBF2CINC=-I../c/simulation/libf2c/
endif

OBJ = $(CPPSRC:.cpp=.o)

all: libinteractive.a SampleClient/interactiveclient

omc_ServiceInterface.o: omi_ServiceInterface.cpp \
  omi_ServiceInterface.h omi_Control.h omi_Transfer.h \
  ../simulation_runtime.h ../simulation_input.h  \
  ../solver_main.h ../options.h


libinteractive.a : $(OBJ)
	$(AR) -s -r $@ $(OBJ)

SampleClient/interactiveclient : client.cpp socket.h socket.cpp socket_win.cpp socket_unix.cpp thread.h thread.cpp
	@echo "Building client for interactive simulation ... "
	$(CXX) $(CPPFLAGS) -o $@ client.cpp socket.cpp thread.cpp -lpthread

clean:
	$(RM) -rf *.o *.a SampleClient/client

Makefile: Makefile.in
	cd $(top_builddir); ./config.status
